{"ast":null,"code":"import _slicedToArray from\"/Users/markheij/ipmedth_airsupport/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Link from'@material-ui/core/Link';import{makeStyles}from'@material-ui/core/styles';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Title from'../components/Title';import Firebase from\"firebase\";// Generate Order Data\nfunction createData(id,name,group,lastSeen,temp){return{id:id,name:name,group:group,lastSeen:lastSeen,temp:temp};}function getRndInteger(min,max){return Math.floor(Math.random()*(max-min+1))+min;}var rows=[];function preventDefault(event){event.preventDefault();}var useStyles=makeStyles(function(theme){return{seeMore:{marginTop:theme.spacing(3)}};});export default function NodeTable(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),loaded=_React$useState2[0],isItLoaded=_React$useState2[1];var user=Firebase.auth().currentUser;if(user){var uid=user.uid;Firebase.firestore().collection(uid).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){// doc.data() is never undefined for query doc snapshots\n//console.log(doc.id, \" => \", doc.data());\nvar nodedata=doc.data();var idn=doc.id;var groupn=nodedata.group;var namen=nodedata.name;var statusn=\"Online\";//nodedata.status\nvar temp=getRndInteger(25,30);var nodeExists=false;var newnode=createData(idn,namen,groupn,statusn,temp);rows.forEach(function(n){if(n.id===idn){nodeExists=true;}else if(idn===\"nodes\"){nodeExists=true;}else{//nothing, node is already in the list\n}});if(!nodeExists){rows.push(newnode);}});isItLoaded(true);});}else{}var classes=useStyles();return React.createElement(React.Fragment,null,React.createElement(Title,null,\"Nodes status\"),React.createElement(Table,{size:\"small\"},React.createElement(TableHead,null,React.createElement(TableRow,null,React.createElement(TableCell,null,\"Name\"),React.createElement(TableCell,null,\"Group\"),React.createElement(TableCell,null,\"Status\"),React.createElement(TableCell,{align:\"right\"},\"Temp\"))),React.createElement(TableBody,null,rows.map(function(row){return React.createElement(TableRow,{key:row.id},React.createElement(TableCell,null,row.name),React.createElement(TableCell,null,row.group),React.createElement(TableCell,null,row.lastSeen),React.createElement(TableCell,{align:\"right\"},row.temp));}))),React.createElement(\"div\",{className:classes.seeMore},React.createElement(Link,{color:\"primary\",href:\"#\",onClick:preventDefault},\"Add nodes\")));}","map":{"version":3,"sources":["/Users/markheij/ipmedth_airsupport/frontend/src/dashboard/nodeTable.js"],"names":["React","Link","makeStyles","Table","TableBody","TableCell","TableHead","TableRow","Title","Firebase","createData","id","name","group","lastSeen","temp","getRndInteger","min","max","Math","floor","random","rows","preventDefault","event","useStyles","theme","seeMore","marginTop","spacing","NodeTable","useState","loaded","isItLoaded","user","auth","currentUser","uid","firestore","collection","get","then","querySnapshot","forEach","doc","nodedata","data","idn","groupn","namen","statusn","nodeExists","newnode","n","push","classes","map","row"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Link from '@material-ui/core/Link';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Title from '../components/Title';\nimport Firebase from \"firebase\";\n\n\n\n\n// Generate Order Data\nfunction createData(id, name, group, lastSeen, temp) {\n  return { id, name, group, lastSeen, temp };\n}\n\nfunction getRndInteger(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) ) + min;\n}\n\nconst rows = [\n];\n\n\n\n\n\nfunction preventDefault(event) {\n  event.preventDefault();\n}\n\nconst useStyles = makeStyles(theme => ({\n  seeMore: {\n    marginTop: theme.spacing(3),\n  },\n}));\n\nexport default function NodeTable() {\n  const[loaded, isItLoaded] = React.useState(false);\n  var user = Firebase.auth().currentUser;\n\n  if (user) {\n    const uid = user.uid;\n\n    Firebase.firestore().collection(uid).get().then(function(querySnapshot){\n      querySnapshot.forEach(function(doc) {\n        // doc.data() is never undefined for query doc snapshots\n        //console.log(doc.id, \" => \", doc.data());\n        let nodedata = doc.data();\n        let idn = doc.id;\n        let groupn = nodedata.group;\n        let namen = nodedata.name;\n        let statusn = \"Online\"; //nodedata.status\n        let temp = getRndInteger(25,30)\n        let nodeExists = false;\n\n\n        let newnode = createData(idn, namen, groupn, statusn, temp)\n        rows.forEach(function (n) {\n          if(n.id === idn){\n            nodeExists = true;\n          }else if (idn ===\"nodes\"){\n            nodeExists = true;\n          }else{\n            //nothing, node is already in the list\n          }\n        })\n\n        if (!nodeExists){\n          rows.push(newnode);\n        }\n\n\n      });\n      isItLoaded(true)\n    })\n\n  }else{\n\n  }\n\n\n\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <Title>Nodes status</Title>\n      <Table size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Name</TableCell>\n            <TableCell>Group</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell align=\"right\">Temp</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows.map(row => (\n            <TableRow key={row.id}>\n              <TableCell>{row.name}</TableCell>\n              <TableCell>{row.group}</TableCell>\n              <TableCell>{row.lastSeen}</TableCell>\n              <TableCell align=\"right\">{row.temp}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n      <div className={classes.seeMore}>\n        <Link color=\"primary\" href=\"#\" onClick={preventDefault}>\n          Add nodes\n        </Link>\n      </div>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}